{"ast":null,"code":"var _jsxFileName = \"/home/pedromonici/USP/Quinto_Semestre/WEB/Projeto/Good-Glasses/good-glasses/src/Components/pay.js\",\n    _s = $RefreshSig$();\n\nimport \"../index.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport mockAPI from \"../API_middlewares/mock\";\nimport TextInput from \"./text_input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Pay(props) {\n  _s();\n\n  const [cpf, setCPF] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n  const [nroCartao, setNroCartao] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n  const [codSeg, setCodSeg] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n  const [endereco, setEndereco] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n\n  function validCPF(cpf) {\n    var re = /^[0-9]{11}$/;\n    return re.test(cpf);\n  }\n\n  ;\n\n  function handleCPFChange(event) {\n    if (event.target.value === \"\") {\n      setCPF({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    if (validCPF(event.target.value)) {\n      setCPF({\n        status: true,\n        value: event.target.value,\n        error: \"\"\n      });\n    } else {\n      setCPF({\n        status: false,\n        value: event.target.value,\n        error: \"CPF inválido!\"\n      });\n    }\n  }\n\n  ;\n\n  function handleNroCartaoChange(event) {\n    if (event.target.value === \"\") {\n      setNroCartao({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    setNroCartao({\n      status: true,\n      value: event.target.value,\n      error: \"\"\n    });\n  }\n\n  function handleCodSegChange(event) {\n    if (event.target.value === \"\") {\n      setCodSeg({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    setCodSeg({\n      status: true,\n      value: event.target.value,\n      error: \"\"\n    });\n  }\n\n  function handleEnderecoChange(event) {\n    if (event.target.value === \"\") {\n      setEndereco({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    setEndereco({\n      status: true,\n      value: event.target.value,\n      error: \"\"\n    });\n  }\n\n  const navigate = useNavigate();\n  let cart = sessionStorage.getItem(\"cart\");\n\n  if (typeof cart !== \"string\") {\n    cart = \"{}\";\n  }\n\n  cart = JSON.parse(cart);\n\n  const executePurchase = async event => {\n    event.preventDefault();\n\n    try {\n      await mockAPI.processPayment(cart);\n      alert(\"compra realizada com sucesso.\");\n      sessionStorage.removeItem(\"cart\");\n      navigate(\"/\");\n    } catch (exception) {\n      alert(exception);\n      navigate(-1);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \" Pagamento \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: executePurchase,\n      children: [/*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"cpf\",\n        label: \"CPF\",\n        state: cpf,\n        onChange: handleCPFChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"nroCartao\",\n        label: \"N\\xFAmero do Cart\\xE3o\",\n        state: nroCartao,\n        onChange: handleNroCartaoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"codSeg\",\n        label: \"C\\xF3digo de Seguran\\xE7a\",\n        state: codSeg,\n        onChange: handleCodSegChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"endereco\",\n        label: \"Endere\\xE7o\",\n        state: endereco,\n        onChange: handleEnderecoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", `R$${Object.values(cart).reduce((acc, elem) => acc + elem.glassesPreviewProps.price * elem.qtt, 0).toFixed(2)}`, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Comprar\",\n        className: \"pink-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Pay, \"s9HuTrAyp+OsdlR/8uuN8naOrqM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Pay;\n;\nexport default Pay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pay\");","map":{"version":3,"names":["Link","useNavigate","useState","mockAPI","TextInput","Pay","props","cpf","setCPF","status","value","error","nroCartao","setNroCartao","codSeg","setCodSeg","endereco","setEndereco","validCPF","re","test","handleCPFChange","event","target","handleNroCartaoChange","handleCodSegChange","handleEnderecoChange","navigate","cart","sessionStorage","getItem","JSON","parse","executePurchase","preventDefault","processPayment","alert","removeItem","exception","Object","values","reduce","acc","elem","glassesPreviewProps","price","qtt","toFixed"],"sources":["/home/pedromonici/USP/Quinto_Semestre/WEB/Projeto/Good-Glasses/good-glasses/src/Components/pay.js"],"sourcesContent":["import \"../index.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\"\nimport mockAPI from \"../API_middlewares/mock\";\nimport TextInput from \"./text_input\";\n\nfunction Pay(props) {\n\tconst [cpf, setCPF] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\tconst [nroCartao, setNroCartao] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\tconst [codSeg, setCodSeg] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\tconst [endereco, setEndereco] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\n\tfunction validCPF(cpf) {\n\t\tvar re = /^[0-9]{11}$/;\n\t\treturn re.test(cpf);\n\t};\n\n\tfunction handleCPFChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetCPF({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tif (validCPF(event.target.value)) {\n\t\t\tsetCPF({status: true, value: event.target.value, error: \"\"});\n\t\t} else {\n\t\t\tsetCPF({status: false, value: event.target.value, error: \"CPF inválido!\"});\n\t\t}\n\t};\n\n\tfunction handleNroCartaoChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetNroCartao({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tsetNroCartao({status: true, value: event.target.value, error: \"\"});\n\t}\n\n\tfunction handleCodSegChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetCodSeg({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tsetCodSeg({status: true, value: event.target.value, error: \"\"});\n\t}\n\n\tfunction handleEnderecoChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetEndereco({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tsetEndereco({status: true, value: event.target.value, error: \"\"});\n\t}\n\n\tconst navigate = useNavigate();\n\n\tlet cart = sessionStorage.getItem(\"cart\");\n\tif (typeof cart !== \"string\") {\n\t\tcart = \"{}\";\n\t}\n\tcart = JSON.parse(cart);\n\n\tconst executePurchase = async (event) => {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tawait mockAPI.processPayment(cart);\n\t\t\talert(\"compra realizada com sucesso.\")\n\t\t\tsessionStorage.removeItem(\"cart\");\n\t\t\tnavigate(\"/\");\n\t\t} catch(exception) {\n\t\t\talert(exception);\n\t\t\tnavigate(-1);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h1> Pagamento </h1>\n\t\t\t<form onSubmit={executePurchase}>\n\t\t\t\t<TextInput id=\"cpf\" label=\"CPF\" state={cpf} onChange={handleCPFChange}/>\n\t\t\t\t<TextInput id=\"nroCartao\" label=\"Número do Cartão\" state={nroCartao} onChange={handleNroCartaoChange}/>\n\t\t\t\t<TextInput id=\"codSeg\" label=\"Código de Segurança\" state={codSeg} onChange={handleCodSegChange}/>\n\t\t\t\t<TextInput id=\"endereco\" label=\"Endereço\" state={endereco} onChange={handleEnderecoChange}/>\n\n\t\t\t\t<div> {`R$${Object.values(cart).reduce((acc, elem) => acc + elem.glassesPreviewProps.price * elem.qtt, 0).toFixed(2)}`} </div>\n\n\t\t\t\t<input type=\"submit\" value=\"Comprar\" className=\"pink-background\"/>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default Pay;"],"mappings":"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"},"metadata":{},"sourceType":"module"}