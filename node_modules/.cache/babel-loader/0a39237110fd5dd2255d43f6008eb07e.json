{"ast":null,"code":"var _jsxFileName = \"/home/cypherlock/gitrepos/Good-Glasses/src/Components/pay.js\",\n    _s = $RefreshSig$();\n\nimport \"../index.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport mockAPI from \"../API_middlewares/mock\";\nimport { ValidatedInput } from \"./validated_input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Pay(props) {\n  _s();\n\n  const [cpf, setCPF] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n  const [nroCartao, setNroCartao] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n  const [codSeg, setCodSeg] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n  const [endereco, setEndereco] = useState({\n    status: false,\n    value: \"\",\n    error: \"Campo Obrigatório!\"\n  });\n\n  function validCPF(cpf) {\n    var re = /^[0-9]{11}$/;\n    return re.test(cpf);\n  }\n\n  ;\n\n  function validNroCartao(nro) {\n    var re = /^[0-9]{16}$/;\n    return re.test(nro);\n  }\n\n  function validCodSeg(cod) {\n    var re = /^[0-9]{3}$/;\n    return re.test(cod);\n  }\n\n  function handleCPFChange(event) {\n    if (event.target.value === \"\") {\n      setCPF({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    if (validCPF(event.target.value)) {\n      setCPF({\n        status: true,\n        value: event.target.value,\n        error: \"\"\n      });\n    } else {\n      setCPF({\n        status: false,\n        value: event.target.value,\n        error: \"CPF inválido!\"\n      });\n    }\n  }\n\n  ;\n\n  function handleNroCartaoChange(event) {\n    if (event.target.value === \"\") {\n      setNroCartao({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    if (!validNroCartao(event.target.value)) {\n      setNroCartao({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Inválido!\"\n      });\n      return;\n    }\n\n    setNroCartao({\n      status: true,\n      value: event.target.value,\n      error: \"\"\n    });\n  }\n\n  function handleCodSegChange(event) {\n    if (event.target.value === \"\") {\n      setCodSeg({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    if (!validCodSeg(event.target.value)) {\n      setCodSeg({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Inválido!\"\n      });\n      return;\n    }\n\n    setCodSeg({\n      status: true,\n      value: event.target.value,\n      error: \"\"\n    });\n  }\n\n  function handleEnderecoChange(event) {\n    if (event.target.value === \"\") {\n      setEndereco({\n        status: false,\n        value: event.target.value,\n        error: \"Campo Obrigatório!\"\n      });\n      return;\n    }\n\n    setEndereco({\n      status: true,\n      value: event.target.value,\n      error: \"\"\n    });\n  }\n\n  const navigate = useNavigate();\n  let cart = sessionStorage.getItem(\"cart\");\n\n  if (typeof cart !== \"string\") {\n    cart = \"{}\";\n  }\n\n  cart = JSON.parse(cart);\n\n  const executePurchase = async event => {\n    event.preventDefault();\n\n    try {\n      await mockAPI.processPayment(cart);\n      alert(\"compra realizada com sucesso.\");\n      sessionStorage.removeItem(\"cart\");\n      navigate(\"/\");\n    } catch (exception) {\n      alert(exception);\n      navigate(-1);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \" Pagamento \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: executePurchase,\n      children: [/*#__PURE__*/_jsxDEV(ValidatedInput, {\n        type: \"text\",\n        id: \"cpf\",\n        label: \"CPF\",\n        state: cpf,\n        onChange: handleCPFChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ValidatedInput, {\n        type: \"text\",\n        id: \"nroCartao\",\n        label: \"N\\xFAmero do Cart\\xE3o\",\n        state: nroCartao,\n        onChange: handleNroCartaoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ValidatedInput, {\n        type: \"text\",\n        id: \"codSeg\",\n        label: \"C\\xF3digo de Seguran\\xE7a\",\n        state: codSeg,\n        onChange: handleCodSegChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ValidatedInput, {\n        type: \"text\",\n        id: \"endereco\",\n        label: \"Endere\\xE7o\",\n        state: endereco,\n        onChange: handleEnderecoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", `R$${Object.values(cart).reduce((acc, elem) => acc + elem.glassesPreviewProps.price * elem.qtt, 0).toFixed(2)}`, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Comprar\",\n        className: \"pink-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Pay, \"s9HuTrAyp+OsdlR/8uuN8naOrqM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Pay;\n;\nexport default Pay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pay\");","map":{"version":3,"names":["Link","useNavigate","useState","mockAPI","ValidatedInput","Pay","props","cpf","setCPF","status","value","error","nroCartao","setNroCartao","codSeg","setCodSeg","endereco","setEndereco","validCPF","re","test","validNroCartao","nro","validCodSeg","cod","handleCPFChange","event","target","handleNroCartaoChange","handleCodSegChange","handleEnderecoChange","navigate","cart","sessionStorage","getItem","JSON","parse","executePurchase","preventDefault","processPayment","alert","removeItem","exception","Object","values","reduce","acc","elem","glassesPreviewProps","price","qtt","toFixed"],"sources":["/home/cypherlock/gitrepos/Good-Glasses/src/Components/pay.js"],"sourcesContent":["import \"../index.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\"\nimport mockAPI from \"../API_middlewares/mock\";\nimport { ValidatedInput } from \"./validated_input\";\n\nfunction Pay(props) {\n\tconst [cpf, setCPF] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\tconst [nroCartao, setNroCartao] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\tconst [codSeg, setCodSeg] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\tconst [endereco, setEndereco] = useState({status: false, value: \"\", error: \"Campo Obrigatório!\"});\n\n\tfunction validCPF(cpf) {\n\t\tvar re = /^[0-9]{11}$/;\n\t\treturn re.test(cpf);\n\t};\n\tfunction validNroCartao(nro) {\n\t\tvar re = /^[0-9]{16}$/;\n\t\treturn re.test(nro);\n\t}\n\tfunction validCodSeg(cod) {\n\t\tvar re = /^[0-9]{3}$/;\n\t\treturn re.test(cod);\n\t}\n\n\tfunction handleCPFChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetCPF({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tif (validCPF(event.target.value)) {\n\t\t\tsetCPF({status: true, value: event.target.value, error: \"\"});\n\t\t} else {\n\t\t\tsetCPF({status: false, value: event.target.value, error: \"CPF inválido!\"});\n\t\t}\n\t};\n\n\tfunction handleNroCartaoChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetNroCartao({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tif (!validNroCartao(event.target.value)) {\n\t\t\tsetNroCartao({status: false, value: event.target.value, error: \"Campo Inválido!\"});\n\t\t\treturn;\n\t\t}\n\t\tsetNroCartao({status: true, value: event.target.value, error: \"\"});\n\t}\n\n\tfunction handleCodSegChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetCodSeg({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tif (!validCodSeg(event.target.value)) {\n\t\t\tsetCodSeg({status: false, value: event.target.value, error: \"Campo Inválido!\"});\n\t\t\treturn;\n\t\t}\n\t\tsetCodSeg({status: true, value: event.target.value, error: \"\"});\n\t}\n\n\tfunction handleEnderecoChange(event) {\n\t\tif (event.target.value === \"\") {\n\t\t\tsetEndereco({status: false, value: event.target.value, error: \"Campo Obrigatório!\"});\n\t\t\treturn;\n\t\t}\n\t\tsetEndereco({status: true, value: event.target.value, error: \"\"});\n\t}\n\n\tconst navigate = useNavigate();\n\n\tlet cart = sessionStorage.getItem(\"cart\");\n\tif (typeof cart !== \"string\") {\n\t\tcart = \"{}\";\n\t}\n\tcart = JSON.parse(cart);\n\n\tconst executePurchase = async (event) => {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tawait mockAPI.processPayment(cart);\n\t\t\talert(\"compra realizada com sucesso.\")\n\t\t\tsessionStorage.removeItem(\"cart\");\n\t\t\tnavigate(\"/\");\n\t\t} catch(exception) {\n\t\t\talert(exception);\n\t\t\tnavigate(-1);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h1> Pagamento </h1>\n\t\t\t<form onSubmit={executePurchase}>\n\t\t\t\t<ValidatedInput type=\"text\" id=\"cpf\" label=\"CPF\" state={cpf} onChange={handleCPFChange}/>\n\t\t\t\t<ValidatedInput type=\"text\" id=\"nroCartao\" label=\"Número do Cartão\" state={nroCartao} onChange={handleNroCartaoChange}/>\n\t\t\t\t<ValidatedInput type=\"text\" id=\"codSeg\" label=\"Código de Segurança\" state={codSeg} onChange={handleCodSegChange}/>\n\t\t\t\t<ValidatedInput type=\"text\" id=\"endereco\" label=\"Endereço\" state={endereco} onChange={handleEnderecoChange}/>\n\n\t\t\t\t<div> {`R$${Object.values(cart).reduce((acc, elem) => acc + elem.glassesPreviewProps.price * elem.qtt, 0).toFixed(2)}`} </div>\n\n\t\t\t\t<input type=\"submit\" value=\"Comprar\" className=\"pink-background\"/>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default Pay;"],"mappings":"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"},"metadata":{},"sourceType":"module"}